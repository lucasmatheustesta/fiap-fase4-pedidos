version: 1.0
runtime: python3
build:
  commands:
    build:
      - echo "ğŸ—ï¸ Starting build process..."
      - echo "ğŸ“¦ Installing dependencies..."
      - pip install --upgrade pip
      - pip install -r requirements.txt
      - echo "âœ… Dependencies installed successfully"
    
    post_build:
      - echo "ğŸ”§ Post-build configuration..."
      - echo "ğŸ“ Checking application structure..."
      - ls -la
      - ls -la src/ || echo "âš ï¸ src directory not found"
      - echo "ğŸ—„ï¸ Creating database directory..."
      - mkdir -p /tmp/db
      - chmod 777 /tmp/db
      - echo "ğŸ§ª Running basic validation..."
      - python -c "print('âœ… Python is working')"
      - echo "âœ… Post-build completed"

run:
  runtime-version: 3.11
  command: python main_production.py
  network:
    port: 5000
    env: PORT
  env:
    - name: FLASK_ENV
      value: "production"
    - name: FLASK_DEBUG
      value: "False"
    - name: PORT
      value: "5000"
    - name: PYTHONPATH
      value: "/app:/app/src"
    - name: SQLALCHEMY_DATABASE_URI
      value: "sqlite:////tmp/db/pedidos_production.db"
    - name: SECRET_KEY
      value: "pedidos_production_secret_key_2024_aws"
    - name: TESTING
      value: "False"

